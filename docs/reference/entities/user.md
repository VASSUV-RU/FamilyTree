# User (сущность)

Глобальная сущность учётной записи пользователя сервиса. Используется для аутентификации, хранения профиля и связей с внешними провайдерами входа. Роли/права не хранятся в `User`, они задаются на уровне членства `Member` в конкретной семье.

## Поля (MVP)
| Поле                | Тип    | Описание                                                |
|---------------------|--------|---------------------------------------------------------|
| `id`                | string | Глобальный идентификатор пользователя.                 |
| `name`              | string | Отображаемое имя.                                      |
| `avatarUrl`         | string | (опц.) URL аватара.                                    |
| `telegramId`        | string | (опц.) Идентификатор Telegram для входа.               |
| `createdAt`         | int    | Время создания (UNIX time).                            |
| `preferredFamilyId` | string | (опц.) Последняя/предпочитаемая активная семья.        |

## Связи
- `User` 1—* `Member` — одно учётное лицо может состоять в нескольких семьях.
- Через `Member.personId` учётка может быть привязана к узлу дерева (`Person`) внутри семьи. См. [identity](./identity.md) и [member](./member.md).

## Замечания по модели
- Роли и права вычисляются на основе роли из `Member` активной семьи. См. [roles](../roles.md), [permissions](../permissions.md).
- Идентификаторы внешних провайдеров (например, `telegramId`) используются для верификации в [guides/authorization](../../guides/authorization/README.md).
- Не хранить секреты провайдеров в `User` (только идентификаторы). Секреты — в безопасной конфигурации.
