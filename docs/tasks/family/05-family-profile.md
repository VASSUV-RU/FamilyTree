# 05 — Получение и изменение профиля семьи

Цель
- Дать фронту и боту API для чтения/обновления названия семьи и базовых настроек.

Требования
- API слой (`app/api`):
  - `GET /families/{id}` — возвращает `FamilyProfile` (name, ownerId, membersCount, createdAt, настройки);
  - `PATCH /families/{id}` — изменение имени, описания/timezone (при наличии).
- Авторизация: только `owner` и `admin` могут обновлять профиль; остальные — `forbidden`.
- Сервис `FamilyProfileService` отвечает за загрузку семьи, проверку прав и обновление.
- Добавить новые поля в таблице `families`, если нужны (`timezone`, `description`). Миграции через Liquibase.
- В логике обновления пересобирать capability (`capVersion`), если изменения влияют на отображение (например, имя семьи в сессии).

Приёмочные критерии
- `GET /families/{id}` возвращает корректный профиль для участника семьи.
- `PATCH /families/{id}` доступен только владельцу/админу и обновляет записи в БД.
- После изменения имени семьи активные сессии получают обновления через 08 (аудит/синхронизация).

Тест‑идеи
- `@WebMvcTest` контроллера: happy-path, нет прав, `notFound`.
- Unit тест сервиса: обновление профиля пересчитывает капабилити.
- Интеграционный тест с БД: обновление имени отражается в последующих чтениях.
